@(modulListe: List[Array[Object]], katalogListe: List[Array[Object]])

<!DOCTYPE html>
<html lang="en">
 <head>
  <link rel="stylesheet" media="screen" href="@routes.Assets.versioned("css/bootstrap.min.css")">
  <link rel="stylesheet" media="screen" href="@routes.Assets.versioned("css/expandable_tree_list.css")">
  @*<link rel="stylesheet" media="screen" href="@routes.Assets.versioned("css/bootstrap-grid.min.css")">*@
  @*<link rel="stylesheet" media="screen" href="@routes.Assets.versioned("css/bootstrap-reboot.min.css")">*@
  <link rel="stylesheet" media="screen" href="@routes.Assets.versioned("css/desktop.css")">

  <link rel="shortcut icon" type="image/png" href="@routes.Assets.versioned("images/favicon.png")">

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

 </head>

 <script src="@routes.Assets.versioned("js/jquery-3.2.1.min.js")" type="text/javascript"></script>
 <script src="@routes.Assets.versioned("js/bootstrap.bundle.js")" type="text/javascript"></script>
 <script src="@routes.Assets.versioned("js/CollapsibleLists.js")" type="text/javascript"></script>
 <script src="@routes.Assets.versioned("js/jspdf.debug.js")" type="text/javascript"></script>
 <script src="@routes.Assets.versioned("js/dom-to-image.js")" type="text/javascript"></script>

 <body>

  <div class = "container-fluid">
   <div class = "row">
    <span class = "col" align = "center">
     <br>
     <h1>
      Planungsunterstützungstool Master Technische Informatik
     </h1>
    </span>
   </div>
    <!-- PopUp Neuer Plan -->
   <div id = "myModal-neuerPlan" class = "modal fade" role = "dialog">
    <div class = "modal-dialog">
      <!-- PopUp Inhalt-->
     <div class = "modal-content">
       <!-- PopUp Kopfzeile -->
      <div class = "modal-header">
       <h4 class = "modal-title">Neuen Plan erstellen</h4>
      </div>
       <!-- PopUp Körper -->
      <div class = "modal-body">
       <div class = "container">
        <div class = "row">
         <div class = "col">
          <h5>Semesteranzahl:</h5>
          <input type = "text" class = "form-control" id = "input-semesteranzahl"
          placeholder = "Semesteranzahl">
          <p id = "fehlermeldung"></p>
         </div>
         <div class = "col">
          <h5>Studienstart:</h5>
          <div class = "radio">
           <label><input type = "radio" name = "optradio" checked = "checked" id = "radio-winter"
           value = "winter">
            Winter
           </label>
          </div>
          <div class = "radio">
           <label><input type = "radio" name = "optradio" id = "radio-sommer"
           value = "sommer">
            Sommer
           </label>
          </div>
         </div>
        </div>
       </div>
      </div>
       <!-- PopUp Fußzeile -->
      <div class = "modal-footer">
       <button type = "button" class = "btn btn-default" data-dismiss = "modal" id = "popup-abbrechen">
        Abbrechen
       </button>
       <button type = "button" class = "btn btn-default" id = "popup-ok"
       onclick = "ok_btn_neuerPlan()">OK
       </button>
      </div>
     </div>
    </div>
   </div>
    <!-- PopUp Freitextmodul -->
   <div id = "myModal-freitext" class = "modal fade" role = "dialog">
    <div class = "modal-dialog">
      <!-- PopUp Inhalt-->
     <div class = "modal-content">
       <!-- PopUp Kopfzeile -->
      <div class = "modal-header">
       <h4 class = "modal-title">Daten ergänzen</h4>
      </div>
       <!-- PopUp Körper -->
      <div class = "modal-body">
       <div class = "container">
        <div class = "row datenergaenzen">
         <input type = "text" class = "form-control" id = "input-id" placeholder = "ID">
        </div>
        <div class = "row datenergaenzen">
         <input type = "text" class = "form-control" id = "input-name" placeholder = "Name">
        </div>
        <div class = "row datenergaenzen">
         <div class = "col">
          <input type = "text" class = "form-control" id = "input-name" placeholder = "SWS">
         </div>
         <div class = "col">
          <input type = "text" class = "form-control" id = "input-name" placeholder = "V">
         </div>
         <div class = "col">
          <input type = "text" class = "form-control" id = "input-name" placeholder = "Ü">
         </div>
         <div class = "col">
          <input type = "text" class = "form-control" id = "input-name" placeholder = "P">
         </div>
         <div class = "col">
          <input type = "text" class = "form-control" id = "input-name" placeholder = "Pr">
         </div>
        </div>
        <div class = "row datenergaenzen">
         <input type = "text" class = "form-control" id = "input-name" placeholder = "Dozent">
        </div>
        <div class = "row datenergaenzen">
         <input type = "text" class = "form-control" id = "input-name" placeholder = "ECTS">
        </div>
       </div>
      </div>
       <!-- PopUp Fußzeile -->
      <div class = "modal-footer">
       <button type = "button" class = "btn btn-default" data-dismiss = "modal" id = "popup-abbrechen">
        Abbrechen
       </button>
       <button type = "button" class = "btn btn-default" id = "popup-ok"
       onclick = "ok_btn_Datenergaenzen()">OK
       </button>
      </div>
     </div>
    </div>
   </div>
    <!-- Container Menüleiste -->
   <div class = "container-fluid">
    <div class = "row rounded" align = "center">

     <div class = "col" align = "center">
      <button type = "button" class = "btn btn-primary" data-toggle = "modal" data-target = "#myModal-neuerPlan">
       Neuer Plan
      </button>
     </div>

     <div class = "col mar" align = "center">
      <h5>Semesteranzahl</h5>
     </div>

     <div class = "col" align = "center">
      <button type = "button" id = "button_minus" onclick = "counter_minus()" class = "btn btn-primary">
       -
      </button>
     </div>

     <div class = "col mar" align = "center">
      <h5 id = "count">0</h5>
     </div>

     <div class = "col" align = "center">
      <button type = "button" id = "button_plus" onclick = "counter_plus()" class = "btn btn-primary">
       +
      </button>
     </div>

     <div class = "col" align = "center">
      <button id = "button_planLaden" class = "btn btn-primary">Plan laden</button>
      <input id = "file-input" type = "file" name = "name" style = "display: none;"/>
     </div>

     <div class = "col" align = "center">
      <button type = "button" class = "btn btn-primary" data-toggle = "modal" data-target = "#myModal-freitext">
       Plan speichern
      </button>
     </div>

     <div class = "col" align = "center">
      <button type = "button" class = "btn btn-primary" onclick = "pdf()" style = "width: auto">
       PDF erstellen
      </button>
     </div>

     <div class = "col mar" align = "center">
      <h5>ECTS:</h5>
     </div>

     <div class = "col mar" align = "center">
      <h5>0</h5>
     </div>
    </div>
   </div>
    <!-- Container um Katalogliste, Regeln, Semester -->
   <div class = "container-fluid">
    <div class = "row rounded">
      <!-- container-fluid Katalogliste -->
     <div class = "col-3 container-fluid">
      <div id = "div_kataloge" class = "col scrollbar rounded-scrollbar-left">
       <div class = "row">
        <span class = "col" align = "left">
         <h4>
          Modulkataloge
         </h4>
        </span>
       </div>
      </div>
     </div>

      <!--  container-fluid um Regeln, Semester -->
     <div class = "col container-fluid">
       <!--  container-fluid Regeln -->
      <div class = "container-fluid" id = "regeln">
       <div class = "row">
        <div class = "col warnungen">
         <p>Regel 1</p>
        </div>
       </div>
      </div>
       <!--  container-fluid Semester -->
      <div id = "semester">
      </div>
     </div>
    </div>
   </div>
  </div>

 </body>

 <script>

         var ausgewaehlt_semester = "";
         var ausgewaehlt_modul = "";
         var startSem = "winter";
         var all_catalogs_closed = 0;
         var moving = 0;

         <!--############################################################################################################################-->

         $('#button_planLaden').on('click', function () {
          $('#file-input').trigger('click');
         });

         <!--mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm-->

         function counter_plus() {
          var wert = Number(document.getElementById("count").textContent);
          wert++;
          document.getElementById("count").textContent = wert;
          add_Semester(startSem);
         }

         <!--mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm-->

         function counter_minus() {
          var wert = Number(document.getElementById("count").textContent);

          if (wert > 0) {
           wert--;
          }

          document.getElementById("count").textContent = wert;

          delete_last_semester();
         }

         <!--mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm-->

         function semester_Markieren(caller) {

          console.log("semesterMarkieren(called)");

          if ($(caller).attr('class').includes("ausgewaehlt")) {

           console.log("BEREITS AUSGEWÄHLT ---> ENTFERNE AUSGEWÄHLT");

           $(caller).toggleClass('ausgewaehlt');
          }
          else {

           $('#semester').children().removeClass('ausgewaehlt');
           console.log("---> AUSGEWÄHLT");
           $(caller).toggleClass('ausgewaehlt');

          }


          if (ausgewaehlt_modul != "") {

           if (moving == 1) {

            console.log("MOVE IN PROGRESS");

            console.log("ZU VERSCHIEBENDES MODUL : " + ausgewaehlt_modul);

            var target = $(caller).children().children().html().substring(0, 1);

            console.log("ZIEL : " + target);

            var id = "mod_" + ausgewaehlt_modul;

            $("#" + id).remove();

            insert_Module_In_Semester(ausgewaehlt_modul, target);

            moving = 0;

           }
           else {

            insert_Module_In_Semester(ausgewaehlt_modul, $(caller).children().children().html().substring(0, 1));

           }


          }
          else {
           // ausgewaehlt_semester = $(caller).children().children().html().replace("Semester ", "");
           ausgewaehlt_semester = $(caller).children().children().html().substring(0, 1);
          }


         }

         <!--mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm-->

         function modul_Markieren(caller) {
          if (!$(caller).parent().parent().attr('class').includes("blocked")) {
           if ($(caller).attr('class').includes("ausgewaehlt")) {
            $(caller).toggleClass('ausgewaehlt');
           }
           else {
            $(".class_p").removeClass('ausgewaehlt');
            $(caller).addClass('ausgewaehlt');
           }

           if (ausgewaehlt_semester != "") {
            insert_Module_In_Semester($(caller).attr('id'), ausgewaehlt_semester);
           }
           else {
            ausgewaehlt_modul = $(caller).attr('id');
           }
          }
         }

         <!--mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm-->

         function insert_Module_In_Semester(mod_id, sem_id) {

          // console.log("Modul : " + mod_id + " in Semester : " + sem_id);

          add_empty_modul(mod_id, sem_id);

          ausgewaehlt_modul = "", ausgewaehlt_semester = "";

          // Grünen Rahmen löschen LINKS
          $("#" + mod_id).removeClass('ausgewaehlt');

          // Modul Aus-Grauen Links
          $("#" + mod_id).parent().parent().addClass('blocked');

          // Grünen Rahmen löschen RECHTS
          $('.container-fluid.semester-gesamt').removeClass('ausgewaehlt');

         }

         <!--mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm-->

         function add_Semester(startSem) {

          var wert = Number(document.getElementById("count").textContent);

          $("#semester").append(
                  '<div class = "container-fluid semester-gesamt class_click_semester">' +
                  '<div class = "class_click_semester_row row">' +
                  '<h6 id="' + 'sem' + wert + '"class="label">' + wert + '</h6>' +
                  '<h6 class="label"></h6>' +
                  '</div>' +
                  '</div>'
          );

          if (startSem == "winter" && wert % 2 == 1) {
           $(".label").last().text(" : Winter-Semester");
          }
          else if (startSem == "winter" && wert % 2 == 0) {
           $(".label").last().text(" : Sommer-Semester");
          }
          else if (startSem == "sommer" && wert % 2 == 1) {
           $(".label").last().text(" : Sommer-Semester");
          }
          else {
           $(".label").last().text(" : Winter-Semester");
          }
         }

         <!--mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm-->

         function delete_last_semester() {
          $("#semester").children().last().remove();
         };

         <!--mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm-->

         function delete_module_from_semester(caller) {
          var id = $(caller).parent().parent().children().first().text().replace("ID: ", "");
          var mod_id = "mod_" + id;

          $("#" + mod_id).remove();
          $("#" + id).parent().parent().removeClass('blocked');

          // Grünen Rahmen löschen RECHTS
          //$('.container-fluid.semester-gesamt').removeClass('ausgewaehlt');

          // ausgewaehlt_semester (Rechts) RESET-EN !!
          //ausgewaehlt_semester = "";

         };

         <!--mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm-->

         function move_module_to_semester(caller) {

          console.log("---------------------------------------------------");

          var modul = $(caller).parent().parent();

          var mod_id = modul.attr("id").replace("mod_", "");

          ausgewaehlt_modul = mod_id;

          // var id = $(caller).parent().parent().children().first().text().replace("ID: ", "");

         };

         <!--mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm-->

         function ok_btn_neuerPlan() {

          var count = 0;
          var meldung = "Bitte eine Anzahl angeben";
          var myRadio = $('input[name="optradio"]');
          startSem = myRadio.filter(':checked').val();
          wert = $("#input-semesteranzahl").val();

          if (wert == "") {
           document.getElementById("fehlermeldung").textContent = meldung;
          }
          else if (wert != "") {
           $("#semester").children().remove();

           for (i = 0; i < wert; i++) {
            count++;
            document.getElementById("count").textContent = count;
            add_Semester(startSem);
           }
           document.getElementById("fehlermeldung").textContent = "";
           $('#myModal-neuerPlan').modal('hide');
           $(".class_p").removeClass('ausgewaehlt');
           $(".class_p").parent().removeClass('blocked');
          }
         }

         <!--mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm-->

         function add_empty_modul(mod_id, sem_id) {

          console.log("add_empty_modul");

          @for(mod <- modulListe) {
          console.log(mod_id + " == " + "@{mod(0)}" + " ? ");
          if ("@{mod(0)}"==mod_id) {

           @*insert_module_in_katalog("@{mod(11)}", "@{mod(0)}", "@{mod(1)}");*@

           $("#semester").children().filter(":nth-child(" + sem_id + ")").append(
                   '<div id="mod_' + mod_id + '"class = "row semester">' +
                   '<div class = "col tags id">' +
                   '<p class="class_click_p">ID: '

                   + mod_id +

                   '</p>' +
                   '</div>' +
                   '<div class = "col tags name">' +
                   '<p class="class_click_p"> @{mod(1)} </p>' +
                   '</div>' +
                   '<div class = "col tags sws">' +
                   '<p class="class_click_p">V:@{mod(2)},Ü:@{mod(3)},P:@{mod(4)},Pr:@{mod(5)}</p>' +
                   '</div>' +
                   '<div class = "col tags dozent">' +
                   '<p class="class_click_p">@{mod(8)}</p>' +
                   '</div>' +
                   '<div class = "col tags ects">' +
                   '<p class="class_click_p" style="vertical-align: middle,text-align: center">ECTS: @{mod(9)}</p>' +
                   '</div>' +
                   '<div class = "col-1 tags">' +
                   '<button type = "button" id = "button_loeschen" class = " btn btn-danger btn-sm btn-block class_click_delete">x</button>' +
                   '</div>' +
                   '<div class = "col-1">' +
                   '<button type = "button" id = "button_verschieben" class = "btn btn-warning btn-sm btn-block class_click_move">>></button>' +
                   '</div>' +
                   '</div>'
           );
          }
          }


         }

         <!--mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm-->

         function neuerPlan() {
          wert = $("#input-semesteranzahl").val();
          ok_btn_neuerPlan();
         }

         <!--mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm-->

         function add_katalog(kat_id, title) {

          // var katalog_count = $("#div_kataloge").children().length;
          $("#div_kataloge").append(
                  '<div id="' + kat_id + '" class = "class_click_katalog katalog">' +
                  '<div class = "class_click_katalog_tags tags">' +
                  '<h6 class = "class_click_katalog_label katalog_label" style="margin:5%">' + title + '</h6>' +
                  '</div>' +
                  '</div>'
          );
         }

         <!--mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm-->

         function insert_module_in_katalog(katalog_id, module_id, module_title) {

//          <div id="outer">
//           <div id="inner"></div>
//          </div>

          $("#" + katalog_id).append(
                  '<div class = "class_click_module_row row modul">'
                  + '<div class = "class_click_module_tag tags" style = "text-align: center">'

                  + '<p id = ' + module_id + ' class = "class_click_module_p">'

                  + module_title

                  + '</p>'

                  + '</div>'
          );
         }

         <!--mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm-->

         $(document).ready(function () {

          $("#button_plus").trigger("click");

          // add_katalog("Katalog 2");

          @for(katal <- katalogListe) {
          add_katalog("@{katal(0)}", "@{katal(1)}");
          }

          @for(mod <- modulListe) {
          insert_module_in_katalog("@{mod(11)}", "@{mod(0)}", "@{mod(1)}");
          }

          $('#div_kataloge').on('click', '.class_click_katalog', function (click) {

           click.preventDefault();
           click = click.target;

           console.log("click : " + click);

           if ($(click).attr('class').includes("class_click_katalog")) {

            if (all_catalogs_closed == 0) {
             var new_click = $(click);
             $(new_click).parent().siblings().toggle("hidden");

             // console.log($("#div_kataloge").filter( $("[display=block]")));
             // console.log($("#div_kataloge").filter( $("[display=none]")));
             // console.log($( "div:hidden" ));

             // console.log($(".modul:hidden").innerText);
             // $( ".modul:visible" ).toogle("hidden");
             $(".modul:visible").closest(".class_click_katalog").attr("id");
            }

           }
           else if ($(click).attr('class').includes("class_click_module_p")) {
            modul_Markieren(click);
           }
           else if ($(click).attr('class').includes("class_click_module_row")) {
            return;
           }

           /*
            if (katalog_open == 0)
            {

            $(e).parent().parent().find('.modul').removeClass("hidden");

            katalog_open = e.parent().parent().attr('id');

            }
            else if (e.parent().parent().attr('id') == katalog_open)
            {

            $(e).parent().parent().parent().children().find('.modul').addClass("hidden");

            katalog_open = 0;

            }
            else
            {

            $(e).parent().parent().parent().children().find('.modul').addClass("hidden");
            $(e).parent().parent().removeClass("hidden");

            katalog_open = e.parent().parent().attr('id');

            }*/
          });

          $('#semester').on('click', '.class_click_semester', function (click) {
           click.preventDefault();
           click = click.target;


           if ($(click).attr('class').includes("class_click_delete")) {
            // LOESCHEN
            delete_module_from_semester(click);
           }
           else if ($(click).attr('class').includes("class_click_move")) {
            // VERSCHIEBEN
            //$(click).addClass("ausgewählt");
            moving = 1;
            move_module_to_semester(click);
           }
           else if ($(click).attr('class').includes("class_click_p")) {
            var new_click = $(click).parent().parent().parent();
            semester_Markieren(new_click);
           }
           // Winter / Sommer - Semester Label wurde geklickt
           else if ($(click).attr('class').includes("label")) {
            var new_click = $(click).parent().parent();
            semester_Markieren(new_click);
           }
           else if ($(click).attr('class').includes("class_click_semester_row")) {
            var new_click = $(click).parent();
            semester_Markieren(new_click);
           }

          });


         });

 </script>
</html>