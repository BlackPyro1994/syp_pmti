@(modulListe: List[Array[Object]], katalogListe: List[Array[Object]])

<body>

  <div class = "container-fluid">
	<div class = "row">
	  <span class = "col" align = "center">
		<br>
		<h1>
		  Planungsunterstützungstool Master Technische Informatik
		</h1>
	  </span>
	</div>
	  <!-- PopUp Neuer Plan -->
	<div id = "myModal-new_plan" class = "modal fade" role = "dialog">
	  <div class = "modal-dialog">
		  <!-- PopUp Inhalt-->
		<div class = "modal-content">
			<!-- PopUp Kopfzeile -->
		  <div class = "modal-header">
			<h4 class = "modal-title">Neuen Plan erstellen</h4>
		  </div>
			<!-- PopUp Körper -->
		  <div class = "modal-body">
			<div class = "container">
			  <div class = "row">
				<div class = "col">
				  <h5>Semesteranzahl:</h5>
				  <input type = "text" class = "form-control" id = "input-semesteranzahl"
				  placeholder = "Semesteranzahl">
				  <p id = "fehlermeldung"></p>
				</div>
				<div class = "col">
				  <h5>Studienstart:</h5>
				  <div class = "radio">
					<label><input type = "radio" name = "optradio" checked = "checked" id = "radio-winter"
					value = "winter">
					  Winter
					</label>
				  </div>
				  <div class = "radio">
					<label><input type = "radio" name = "optradio" id = "radio-sommer"
					value = "sommer">
					  Sommer
					</label>
				  </div>
				</div>
			  </div>
			</div>
		  </div>
			<!-- PopUp Fußzeile -->
		  <div class = "modal-footer">
			<button type = "button" class = "btn btn-default" content-dismiss = "modal" id = "popup-abbrechen">
			  Abbrechen
			</button>
			<button type = "button" class = "btn btn-default" id = "popup-new-ok"
			onclick = "ok_button_new_plan()">OK
			</button>
		  </div>
		</div>
	  </div>
	</div>
	  <!-- PopUp Freitextmodul -->
	<div id = "myModal-freitext" class = "modal fade" role = "dialog">
	  <div class = "modal-dialog">
		  <!-- PopUp Inhalt-->
		<div class = "modal-content">
			<!-- PopUp Kopfzeile -->
		  <div class = "modal-header">
			<h4 class = "modal-title">Daten ergänzen</h4>
		  </div>
			<!-- PopUp Körper -->
		  <div class = "modal-body">
			<div class = "container">
			  <div class = "row datenergaenzen">
				<input type = "text" class = "form-control" id = "input-name" placeholder = "Name">
			  </div>
			  <div class = "row datenergaenzen">
				<div class = "col">
				  <input type = "text" class = "form-control" id = "input-v" placeholder = "V">
				</div>
				<div class = "col">
				  <input type = "text" class = "form-control" id = "input-u" placeholder = "Ü">
				</div>
				<div class = "col">
				  <input type = "text" class = "form-control" id = "input-p" placeholder = "P">
				</div>
				<div class = "col">
				  <input type = "text" class = "form-control" id = "input-pr" placeholder = "Pr">
				</div>
			  </div>
			  <div class = "row datenergaenzen">
				<input type = "text" class = "form-control" id = "input-dozent" placeholder = "Dozent">
			  </div>
			  <div class = "row datenergaenzen">
				<input type = "text" class = "form-control" id = "input-ects" placeholder = "ECTS">
			  </div>
			</div>
		  </div>
			<!-- PopUp Fußzeile -->
		  <div class = "modal-footer">
			<button type = "button" class = "btn btn-default" content-dismiss = "modal" id = "popup-freitext-abbrechen">
			  Abbrechen
			</button>
			<button type = "button" class = "btn btn-default" id = "popup-freitext-ok">
			  OK
			</button>
		  </div>
		</div>
	  </div>
	</div>
	  <!-- PopUp M07 -->
	<div id = "myModal-m07" class = "modal fade" role = "dialog">
	  <div class = "modal-dialog">
		  <!-- PopUp Inhalt-->
		<div class = "modal-content">
			<!-- PopUp Kopfzeile -->
		  <div class = "modal-header">
			<h4 class = "modal-title">Daten ergänzen</h4>
		  </div>
			<!-- PopUp Körper -->
		  <div class = "modal-body">
			<div class = "container">
			  <div class = "row datenergaenzen">
				<input type = "text" class = "form-control" id = "input-name-m07" placeholder = "Name">
			  </div>
			  <div class = "row datenergaenzen">
				<input type = "text" class = "form-control" id = "input-dozent-m07" placeholder = "Dozent">
			  </div>
			</div>
		  </div>
			<!-- PopUp Fußzeile -->
		  <div class = "modal-footer">
			<button type = "button" class = "btn btn-default" content-dismiss = "modal" id = "popup-m07-abbrechen">
			  Abbrechen
			</button>
			<button type = "button" class = "btn btn-default" id = "popup-m07-ok">
			  OK
			</button>
		  </div>
		</div>
	  </div>
	</div>
	  <!-- Container Menüleiste -->
	<div class = "container-fluid">
	  <div class = "row rounded" align = "center">

		<div class = "col" align = "center">
		  <button type = "button" class = "btn btn-primary" content-toggle = "modal" onclick="new_plan()">
			Neuer Plan
		  </button>
		</div>

		<div class = "col mar" align = "center">
		  <h5>Semesteranzahl</h5>
		</div>

		<div class = "col" align = "center">
		  <button type = "button" disabled id = "button_minus" onclick = "counter_minus()" class = "btn btn-primary">
			-
		  </button>
		</div>

		<div class = "col mar" align = "center">
		  <h5 id = "count">0</h5>
		</div>

		<div class = "col" align = "center">
		  <button disabled type = "button" id = "button_plus" onclick = "counter_plus()" class = "btn btn-primary">
			+
		  </button>
		</div>

		<div class = "col" align = "center">
		  <button id = "button_planLaden" class = "btn btn-primary">
			Plan laden</button>
		  @*<button id = "button_planLaden" class = "btn btn-primary">Plan laden</button>*@
		  <input id = "file-input" type = "file" name = "name" style = "display: none;    "/>
		</div>

		<div class = "col" align = "center">
		  <button disabled type = "button" class = "btn btn-primary" id="button_speichern" onclick = "save()">
			@*<button type = "button" class = "btn btn-primary" content-toggle = "modal" content-target = "#myModal-freitext">*@
			  Plan speichern
		  </button>
		</div>

		<div class = "col" align = "center">
		  <button disabled type = "button" id="button_pdf" class = "btn btn-primary" style = "width: auto">
			PDF erstellen
		  </button>
		</div>

		<div class = "col mar" align = "center">
		  <h5>ECTS:</h5>
		</div>

		<div class = "col mar" align = "center">
		  <h5 id="master_ects">0</h5>
		</div>
	  </div>
	</div>
	  <!-- Container um Katalogliste, Regeln, Semester -->
	<div class = "container-fluid">
	  <div class = "row rounded">
		  <!-- container-fluid Katalogliste -->
		<div class = "col-3 container-fluid">
		  <div id = "div_kataloge" class = "col scrollbar rounded-scrollbar-left">
			<div class = "row">
			  <span class = "col" align = "left">
				<h4>
				  Modulkataloge
				</h4>
			  </span>
			</div>
		  </div>
		</div>

		  <!--  container-fluid um Regeln, Semester -->
		<div class = "col container-fluid">
			<!--  container-fluid Regeln -->
		  <div class = "container-fluid" id = "regeln">
			@* <div class = "row"> *@
			@* <div class = "col warnungen"> *@
			@* <p>Regel 1</p> *@
			@* </div> *@
			@* </div> *@
		  </div>
			<!--  container-fluid Semester -->
		  <div id = "div_semester">
		  </div>
		</div>
	  </div>
	</div>
  </div>

</body>

<script>

		var ausgewaehlt_semester = "";
		var ausgewaehlt_modul = "";
		var global_mod_id, global_sem_id;

		var open_catalog = "";

		var startSem = "winter";
		var all_catalogs_closed = 0;
		var moving = 0;

		var count = 0;

		var blocked = true;

		var content = new Array();

		var katalogListe = new Array();
		var modulListe = new Array();

		var modulString = "";

		@*mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm*@

		$('#button_planLaden').on('click', function ()
		{
		  $('#file-input').trigger('click');
		});

		@*mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm*@

		$('#button_pdf').on('click', create_pdf);

		@*mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm*@

		$('#myModal-freitext').on('click', '#popup-freitext-abbrechen', function (click)
		{
		  $('.container-fluid.semester-gesamt').removeClass('ausgewaehlt');
		  $("#" + global_mod_id).removeClass('ausgewaehlt');
		});

		@*mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm*@

		$('#myModal-m07').on('click', '#popup-m07-abbrechen', function (click)
		{
		  $('.container-fluid.semester-gesamt').removeClass('ausgewaehlt');
		  $("#" + global_mod_id).removeClass('ausgewaehlt');
		});

		@*mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm*@

		$('#myModal-freitext').on('click', '#popup-freitext-ok', function (click)
		{
		  var name;
		  var v, u, p, pr;
		  var dozent;
		  var ects;

		  name = $("#input-name").val();
		  v = $("#input-v").val();
		  u = $("#input-u").val();
		  p = $("#input-p").val();
		  pr = $("#input-pr").val();
		  dozent = $("#input-dozent").val();
		  ects = $("#input-ects").val();

		  append_free_module(global_mod_id, global_sem_id, name, v, u, p, pr, dozent, ects);

		  $('#myModal-freitext').modal('hide');

		  $('.container-fluid.semester-gesamt').removeClass('ausgewaehlt');
		  $("#" + global_mod_id).removeClass('ausgewaehlt');
		});

		@*mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm*@

		$('#myModal-m07').on('click', '#popup-m07-ok', function (click)
		{
		  var name;
		  var v, u, p, pr;
		  var dozent;
		  var ects;

		  name = $("#input-name-m07").val();
		  v = 2;
		  u = 1;
		  p = 1;
		  pr = 0;
		  dozent = $("#input-dozent-m07").val();
		  ects = 5;

		  if (global_mod_id == "M07" && name == "")
		  {
			name = "Name";
		  }
		  if (global_mod_id == "M07" && dozent == "")
		  {
			dozent = "Dozent";
		  }
		  append_free_module(global_mod_id, global_sem_id, name, v, u, p, pr, dozent, ects);
		  $("#" + global_mod_id).parent().parent().addClass('blocked');

		  $('#myModal-m07').modal('hide');

		  $('.container-fluid.semester-gesamt').removeClass('ausgewaehlt');
		  $("#" + global_mod_id).removeClass('ausgewaehlt');

		  update_rules();
		});

		@*mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm*@

		$('#div_kataloge').on('click', '.class_click_katalog', function (click)
		{
		  if (!blocked)
		  {
			click.preventDefault();

			click = click.target;

			$(click).closest(".class_click_katalog").css("background", "#eee");

			if ($(click).attr('class').includes("class_click_katalog"))
			{

			  if (all_catalogs_closed == 0)
			  {

				// ################################################################################################
				//              Neuer Katalog
				// ################################################################################################

				if (($(click).parent().siblings().is(':hidden')) && open_catalog == "")
				{
				  var new_click = $(click);

				  $(new_click).parent().siblings().toggle(200);

				  // ### open_catalog = $(".modul:visible").closest(".class_click_katalog").attr("id");

				  // $(click).parent().parent().toggleClass("open_catalog");

				  // ### $(click).closest(".class_click_katalog").toggleClass("open_catalog");

				}

				// ################################################################################################
				//              Gleiche Katalog (schließen)
				// ################################################################################################

				else if ($(click).closest(".class_click_katalog").attr("id") == open_catalog)
				{

				  // ### $(click).closest(".class_click_katalog").toggleClass("open_catalog");

				  // ###  var new_click = $(click);

				  // ### $(new_click).parent().siblings().not('.class_click_katalog').not('.class_click_katalog_label').toggle(200);

				  // ###  open_catalog = "";

				  // $(click).parent().parent().toggleClass("open_catalog");

				  // $(click).closest(".class_click_katalog").toggleClass("open_catalog");

				}

				// ################################################################################################
				//              Wechsel von Katalogen
				// ################################################################################################

				else if (( $("#" + open_catalog).children().first().siblings().is(':visible')) && open_catalog != $(click).closest(".class_click_katalog").attr("id"))
				{

				  $("#" + open_catalog).children().first().siblings().toggle("hidden");

				  $("#" + open_catalog).removeClass("open_catalog");

				  // $(click).parent().parent().toggleClass("open_catalog");

				  $(click).closest(".class_click_katalog").toggleClass("open_catalog");

				  var new_click = $(click);

				  $(new_click).parent().siblings().show(200);

				  open_catalog = $(click).parent().parent().attr("id");

				}

			  }

			}
			else if ($(click).attr('class').includes("class_click_module_p"))
			{
			  select_module(click);
			}
			else if ($(click).attr('class').includes("class_click_module_row"))
			{
			  return;
			}

		  }

		});

		@*mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm*@

		$('#div_kataloge').on('mouseover', '.class_click_katalog_label', function (event)
		{
		  if (!blocked)
		  {
			if ($(event.target).parent().parent().attr('id') != open_catalog)
			{
			  $(this).parent().parent().css("background", "red");
			}
		  }

		});

		@*mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm*@

		$('#div_kataloge').on('mouseout', '.class_click_katalog_label', function (event)
		{
		  $(this).parent().parent().css("background", "#eee");

		});

		@*mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm*@

		$('#myModal-new_plan').on('click', '#popup-abbrechen', function (click)
		{
		  $('#myModal-new_plan').modal('hide');
		});

		@*mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm*@

		$('#div_kataloge').on('mouseover', '.class_click_module_p', function (event)
		{
		  $(this).fadeOut(50);
		  $(this).fadeIn(200);
		});

		@*mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm*@

		$('#div_semester').on('click', '.class_click_semester', function (click)
		{

		  click.preventDefault();
		  click = click.target;

		  if ($(click).attr('class').includes("class_click_delete"))
		  {
			// LOESCHEN
			delete_module_from_semester(click);
		  }
		  else if ($(click).attr('class').includes("class_click_move"))
		  {
			// VERSCHIEBEN
			//$(click).addClass("ausgewählt");
			moving = 1;
			move_module_to_semester(click);
		  }
		  else if ($(click).attr('class').includes("class_click_p"))
		  {
			var new_click = $(click).parent().parent().parent();
			select_semester(new_click);
		  }
		  // Winter / Sommer - Semester Label wurde geklickt
		  else if ($(click).attr('class').includes("label"))
		  {
			var new_click = $(click).parent().parent();
			select_semester(new_click);
		  }
		  else if ($(click).attr('class').includes("class_click_semester_row"))
		  {
			var new_click = $(click).parent();
			select_semester(new_click);
		  }

		});

		@*mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm*@

		function load(filename, text)
		{
		  var element = document.createElement('a');
		  element.setAttribute('href', 'content:text/plain;charset=utf-8,' + encodeURIComponent(text));
		  element.setAttribute('download', filename);

		  element.style.display = 'none';
		  document.body.appendChild(element);

		  element.click();

		  document.body.removeChild(element);
		}

		function readBlob(opt_startByte, opt_stopByte)
		{

		  var files = document.getElementById('file-input').files;
		  if (!files.length)
		  {
			alert('Please select a file!');
			return;
		  }

		  var file = files[0];
		  var start = parseInt(opt_startByte) || 0;
		  var stop = parseInt(opt_stopByte) || file.size - 1;

		  var reader = new FileReader();

		  // If we use onloadend, we need to check the readyState.
		  reader.onloadend = function (evt)
		  {
			if (evt.target.readyState == FileReader.DONE)
			{ // DONE == 2

			  document.getElementById('byte_content').textContent = evt.target.result;

			  //                        document.getElementById('byte_range').textContent = ['Read bytes: ', start + 1, ' - ', stop + 1, ' of ', file.size, ' byte file'].join('');
			}
		  };

		  var blob = file.slice(start, stop + 1);
		  reader.readAsBinaryString(blob);
		}

		function update_rules()
		{

		  $("#regeln").children().remove();

		  @for(kat<-katalogListe){

		  var katID = "@{kat(0)}";
		  var belegAnz = @kat(2);
		  var countBlocked = $("#" + katID).children().filter(".blocked").length;
		  var countWPPblocked = $("#" + katID).children().filter(".blocked_wpp").length;

		  if (katID == "WPP")
		  {
			countBlocked = countWPPblocked;
		  }

		  if ((belegAnz > 0) && (countBlocked < belegAnz))
		  {

			var pm = "Verpflichtend zu wählen:";

			@for(mod<-modulListe){

			if (("@{mod(10)}" == "true") && ("@{mod(11)}" == katID))
			{
			  pm += " ";
			  pm += "@{mod(0)}";
			}
			}

			if (pm != "Verpflichtend zu wählen:")
			{
			  $("#regeln").append('<div class ="row">' + '<div class ="col warnungen">' + '<p>' + 'Aus dem Katalog ' + '"@{kat(1)}"' + ' fehlen noch ' + (belegAnz - countBlocked) + ' Modul(e).' + ' (' + pm + ')' + '</p>');
			}
			else
			{
			  $("#regeln").append('<div class ="row">' + '<div class ="col warnungen">' + '<p>' + 'Aus dem Katalog ' + '"@{kat(1)}"' + ' fehlen noch ' + (belegAnz - countBlocked) + ' Modul(e).' + '</p>');
			}

		  }
		  }

		}

		function availability_mask_semesters(module_id)
		{

		  if (module_id)
		  {

			@for(mod<-modulListe){
			if ("@{mod(0)}" == module_id)
			{

			  // Sommer und nicht Winter

			  if (@{mod(6)} &&
			  !(@{mod(7)})
			)
			  {

				("SOMMER");

				// ###                                 $("#div_semester").children().filter(":even").addClass('include');
				// ###                                 $("#div_semester").children().filter(":odd").removeClass('include');

				// $("#div_semester").children().children().not('.class_click_semester_row').hide(200);

				// ###                                 $("#div_semester").children().children().not('.class_click_semester_row').css('display', 'none');

			  }

			  // Winter und nicht Sommer

			else
			  if ((!@{mod(6)}) && @{mod(7)})
			  {

				("WINTER");

				// ### $("#div_semester").children().filter(":odd").addClass('include');
				// ### $("#div_semester").children().filter(":even").removeClass('include');
				// ### $("#div_semester").children().children().not('.class_click_semester_row').hide(200);

				// $("#div_semester").children().children().not('.class_click_semester_row').css('display', 'block');

			  }

			  return;

			}
			}
		  }
		  else
		  {

			("ELSE");

			// $("#div_semester").children().removeClass('include');

			// $("#div_semester").children().children().not('.class_click_semester_row').show(200);

		  }
		}

		function update_semester_ects(mod_id, sem_id, wert)
		{
		  var id = "sem_ects_anz" + sem_id;
		  (id);
		  var ects = Number(document.getElementById("" + id).textContent);

		  // wert = auswahl ob addieren oder subtrahieren
		  // 1 == adieren 0 == subtrahieren
		  if (wert == 1)
		  {
			@for(mod<-modulListe){
			if ("@{mod(0)}" == mod_id)
			{
			  if (mod_id == "ALM")
			  {
				document.getElementById("" + id).textContent = ects;
			  }
			  else
			  {
				ects = ects + @{mod(9)};
				document.getElementById("" + id).textContent = ects;
			  }
			}
			}
		  }
		  else if (wert == 0)
		  {
			@for(mod<-modulListe){
			if ("@{mod(0)}" == mod_id)
			{
			  if (mod_id == "ALM")
			  {
				document.getElementById("" + id).textContent = ects;
			  }
			  else
			  {
				ects = ects - @{mod(9)};
				document.getElementById("" + id).textContent = ects;
			  }
			}
			}
		  }
		}

		function update_master_ects(mod_id, wert)
		{

		  var ects = Number(document.getElementById("master_ects").textContent);

		  // wert = auswahl ob addieren oder subtrahieren
		  // 1 == adieren 0 == subtrahieren
		  if (wert == 1)
		  {
			@for(mod<-modulListe){
			if ("@{mod(0)}" == mod_id)
			{
			  if (mod_id == "ALM")
			  {
				document.getElementById("master_ects").textContent = ects;
			  }
			  else
			  {
				ects = ects + @{mod(9)};
				document.getElementById("master_ects").textContent = ects;
			  }
			}
			}
		  }
		  else if (wert == 0)
		  {
			@for(mod<-modulListe){
			if ("@{mod(0)}" == mod_id)
			{
			  if (mod_id == "ALM")
			  {
				document.getElementById("master_ects").textContent = ects;
			  }
			  else
			  {
				ects = ects - @{mod(9)};
				document.getElementById("master_ects").textContent = ects;
			  }
			}
			}
		  }
		}

		@*mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm*@

		document.getElementById('file-input').onchange = function ()
		{
		  var file = this.files[0];

		  var reader = new FileReader();

		  reader.onload = function (progressEvent)
		  {
			var temp;

			var lines = this.result.split('\n');

			temp = lines[0].split(',');

			ok_button_new_plan({"count": temp[1], "semStart": temp[0]});

			for (var line = 1; line < lines.length; line++)
			{
			  temp = lines[line];

			  if (temp.split(',')[1] === "M07" || temp.split(',')[1] === "ALM")
			  {

				// temp = temp.substring(1);
				temp = temp.split(',');

				insert_module_in_semester(temp[1], temp[0], {
				  "mod_id": temp[1],
				  "sem_id": temp[0],
				  "name": temp[2],
				  "v": temp[3],
				  "u": temp[4],
				  "p": temp[5],
				  "pr": temp[6],
				  "dozent": temp[7],
				  "ects": temp[8]
				});

			  }
			  else
			  {

				temp = temp.split(',');

				insert_module_in_semester(temp[1], temp[0]);

//				  for (var pos = 1; pos < temp.length; pos++)
//				  {
// 				     insert_module_in_semester(temp[pos], temp[0]);
//				  }

			  }
			}
		  };
		  reader.readAsText(file);
		}

		$(document).ready(function ()
		{
		  @for(katal <- katalogListe) {

		  add_catalog("@{katal(0)}", "@{katal(1)}");
		  katalogListe.push("@{katal(1)},@{katal(0)}");

		  }

		  @for(mod <- modulListe) {

		  if ("@{mod(11)}" == "WPP")
		  {
			insert_module_in_catalog("@{mod(11)}", "@{mod(0)}_WPP", "@{mod(1)}");
			modulListe.push("@{mod(0)}_WPP,@{mod(1)},@{mod(2)},@{mod(3)},@{mod(4)},@{mod(5)},@{mod(8)},@{mod(9)}");
		  } else
		  {
			insert_module_in_catalog("@{mod(11)}", "@{mod(0)}", "@{mod(1)}");
			modulListe.push("@{mod(0)},@{mod(1)},@{mod(2)},@{mod(3)},@{mod(4)},@{mod(5)},@{mod(8)},@{mod(9)}");
		  }

		  if (("@{mod(11)}" != "PM") && ("@{mod(11)}" != "AM") && ("@{mod(11)}" != "WPP"))
		  {
			insert_module_in_catalog("WPP", "@{mod(0)}_WPP", "@{mod(1)}");
			modulListe.push("@{mod(0)}_WPP,@{mod(1)},@{mod(2)},@{mod(3)},@{mod(4)},@{mod(5)},@{mod(8)},@{mod(9)}");
		  }

		  }


		  //////////////////////////////////////////////////////////////////////////

		  // test_1();

		  // test_2();

		  $(document).ready(function ()
		  {
			// test_3();
		  });

		});

</script>
